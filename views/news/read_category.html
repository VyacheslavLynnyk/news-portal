<script src="<?= REL_URL . '/js/jquery.pagination.js' ?>"></script>

<article>
    <div class="page-header">
        <h2>Рубрика: <?= $this->data['category'] ?></h2>
        <!--    CARUSELL -->
    </div>



    <script type="text/javascript">

        // This is a very simple demo that shows how a range of elements can
        // be paginated.
        // The elements that will be displayed are in a hidden DIV and are
        // cloned for display. The elements are static, there are no Ajax
        // calls involved.

        /**
         * Callback function that displays the content.
         *
         * Gets called every time the user clicks on a pagination link.
         *
         * @param {int} page_index New Page index
         * @param {jQuery} jq the container with the pagination links as a jQuery object
         */
        function pageselectCallback(page_index, jq){
            var new_content = jQuery('#hiddenresult div.result:eq('+page_index+')').clone();
            $('#Searchresult').empty().append(new_content);
            return false;
        }

        /**
         * Initialisation function for pagination
         */
        function initPagination() {
            // count entries inside the hidden content
            var num_entries = jQuery('#hiddenresult div.result').length;
            // Create content inside pagination element
            $("#Pagination").pagination(num_entries, {
                callback: pageselectCallback,
                items_per_page:1 // Show only one item per page
            });
        }

        // When document is ready, initialize pagination
        $(document).ready(function(){
            initPagination();
        });


    </script>


    <div id="Pagination"></div>
<!--    <br style="clear:both;" />-->
    <div id="Searchresult">
        This content will be replaced when pagination inits.
    </div>

    <!-- Container element for all the Elements that are to be paginated -->
    <div id="hiddenresult" style="display:none;">
        <?php $article_counter = 0; ?>
        <?php foreach ( $this->data['news'] as $article): ?>
            <?php if ($article_counter % 5 == 0) : ?>
                <?php if ($article_counter >= 4) : ?>
                </div>
                <?php endif; ?>
            <div class="result">
            <?php endif; ?>

            <h4>
                <a href="<?= REL_URL . '/news/read-article/' . $article->id ?>">
                    <?= $article->article ?>
                </a>
            </h4>
            <?php ++$article_counter; ?>
        <?php endforeach ?>
            </div>
    <div class="searchresult_pagination"></div>
    <br style="clear:both;" />
    </div>
</article>
